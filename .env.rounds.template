# ============================================================================
# Environment Configuration Template for Rounds Docker Container
# ============================================================================
# Copy this file to .env.rounds and customize the values for your environment.
# All configuration options from rounds/config.py are available here.
#
# Required fields:
#   - TELEMETRY_BACKEND: The observability platform to query for errors
#   - SIGNOZ_API_URL, SIGNOZ_API_KEY: If using SigNoz backend
#   - RUN_MODE: "daemon" for continuous polling
#
# Optional fields have sensible defaults suitable for most deployments.
# ============================================================================

# ============================================================================
# Run Mode
# ============================================================================
# Options: "daemon" (production), "cli" (interactive), "webhook" (HTTP server)
RUN_MODE=daemon

# ============================================================================
# Telemetry Backend Configuration
# ============================================================================
# Supported backends: "signoz", "jaeger", "grafana_stack"
TELEMETRY_BACKEND=signoz

# SigNoz Configuration (if TELEMETRY_BACKEND=signoz)
# URL to the SigNoz API endpoint
SIGNOZ_API_URL=http://signoz:4418
# Optional: API key for SigNoz authentication
SIGNOZ_API_KEY=

# Jaeger Configuration (if TELEMETRY_BACKEND=jaeger)
# JAEGER_API_URL=http://localhost:16686

# Grafana Stack Configuration (if TELEMETRY_BACKEND=grafana_stack)
# GRAFANA_LOKI_URL=http://localhost:3100
# GRAFANA_TEMPO_URL=http://localhost:3200
# GRAFANA_PROMETHEUS_URL=http://localhost:9090
# GRAFANA_API_KEY=

# ============================================================================
# Signature Store Configuration
# ============================================================================
# Supported backends: "sqlite" (default), "postgresql"
STORE_BACKEND=sqlite

# SQLite Configuration (if STORE_BACKEND=sqlite)
# Path to the SQLite database file (must be writable)
STORE_SQLITE_PATH=/app/data/signatures.db

# PostgreSQL Configuration (if STORE_BACKEND=postgresql)
# STORE_POSTGRESQL_URL=postgresql://user:password@localhost/rounds

# ============================================================================
# Diagnosis Engine Configuration
# ============================================================================
# Supported backends: "claude_code" (default), "openai"
DIAGNOSIS_BACKEND=claude_code

# Claude Code Configuration (if DIAGNOSIS_BACKEND=claude_code)
# Budget per diagnosis in USD (default: 2.0)
CLAUDE_CODE_BUDGET_USD=2.0
# Claude model to use (default: claude-opus)
CLAUDE_MODEL=claude-opus

# OpenAI Configuration (if DIAGNOSIS_BACKEND=openai)
# OPENAI_API_KEY=sk-...
# Model to use (default: gpt-4)
# OPENAI_MODEL=gpt-4
# Budget per diagnosis in USD (default: 2.0)
# OPENAI_BUDGET_USD=2.0

# Daily budget limit across all diagnoses (USD)
DAILY_BUDGET_LIMIT=100.0

# ============================================================================
# Notification Configuration
# ============================================================================
# Supported backends: "stdout", "markdown", "github_issue"
NOTIFICATION_BACKEND=markdown

# Output directory for markdown reports
NOTIFICATION_OUTPUT_DIR=/app/reports

# GitHub Issue Configuration (if NOTIFICATION_BACKEND=github_issue)
# GitHub personal access token
# GITHUB_TOKEN=ghp_...
# Repository for issue creation (owner/repo format)
# GITHUB_REPO=myorg/myrepo

# ============================================================================
# Polling Configuration
# ============================================================================
# Interval between polling cycles (seconds)
POLL_INTERVAL_SECONDS=60

# Number of events to retrieve per poll cycle
POLL_BATCH_SIZE=100

# Lookback window for error queries (minutes)
ERROR_LOOKBACK_MINUTES=15

# ============================================================================
# Codebase Configuration
# ============================================================================
# Path to the target codebase for diagnosis context
CODEBASE_PATH=/workspace/target

# ============================================================================
# Logging Configuration
# ============================================================================
# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO
# Log format: json or text
LOG_FORMAT=text

# ============================================================================
# Webhook Configuration (if RUN_MODE=webhook)
# ============================================================================
# Host to listen on
# WEBHOOK_HOST=0.0.0.0
# Port to listen on
# WEBHOOK_PORT=8080
# API key for webhook authentication (recommended for production)
# WEBHOOK_API_KEY=
# Require API key authentication
# WEBHOOK_REQUIRE_AUTH=false

# ============================================================================
# Development Configuration
# ============================================================================
# Enable debug mode with verbose logging (default: false)
# DEBUG=false

# ============================================================================
# Claude Code CLI Version (optional)
# ============================================================================
# Specific Claude Code CLI version to install
# Leave empty for latest version (recommended)
# CLAUDE_CODE_VERSION=
